#!/bin/bash

REDIS_HOST=${REDIS_HOST:-localhost}
REDIS_PORT=${REDIS_PORT:-6379}
TOTAL_REQUESTS=${TOTAL_REQUESTS:-100000}
CONCURRENT_CLIENTS=${CONCURRENT_CLIENTS:-50000}
PAYLOAD_SIZE=${PAYLOAD_SIZE:-3}
TESTS_LIST=${TESTS_LIST:-GET,SET} #GET,SET,PING_INLINE,PING_BULK,INCR
OUTPUT_FILE=${OUTPUT_FILE:-/data/redis-benchmark-results.txt}

redis-benchmark -t $TESTS_LIST \
-h $REDIS_HOST \
-p $REDIS_PORT \
-n $TOTAL_REQUESTS \
-c $CONCURRENT_CLIENTS \
-d $PAYLOAD_SIZE \
> $OUTPUT_FILE

echo "Resultados do teste de carga salvos em $OUTPUT_FILE"
